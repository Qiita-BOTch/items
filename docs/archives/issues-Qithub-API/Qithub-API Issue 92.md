これは  リポジトリの[ issue をアーカイブ]()したものです。

# 新着Qiita記事 ハッシュタグ検索が機能しない件について

- 2018/04/08 17:26 by KEINOS
- State: closed
- Archive of https://api.github.com/repos/Qithub-BOT/Qithub-API

## 本文

## 問題

最近、Qiitadon もメンバーが増え、徐々に Mastodon に小慣れてきたユーザが増えるなか、ハッシュタグ検索をすると、ほとんどの（技術系）タグで Qithub-BOT の時報の取りまとめトゥートがヒットしてしまいます。

[インスタンス・マスター](https://qiitadon.com/@htomine/99686794029432043)からも「**技術関連のハッシュタグの検索結果を埋めちゃってるのちょっとつらい**」という苦言が出ているので、ドゲントCentOSに移管。

## 自分の案

サーバーの引っ越しもダンボールを開けていない状態ですが、ふと**公開でトゥートしてもLTLを汚さない方法**を考えつきました。

他者に対しての返信は公開であっても LTL に流れないのを利用して。

1. 時報専用のBOTアカウントを用意する
2. 従来の Qithub-BOT は上記アカウントの時報トゥートに返信する。

QithubサーバにMastodonを導入する案もあるのですが、ちょっと思うところもありペンディングになっておりますが、上記であれば割と簡単に実装できると思います。

## TL;DR（進捗・結論 2018/04/10 現在）

- [x] 過去の思い出を削除中
- [ ] BOT の稼働環境の引っ越し
- [ ] 取りまとめトゥートの廃止
- [ ] 時報トゥートと新着Qiita記事トゥートのアカウントをわける
    - [ ] 新着Qiita記事は最新の**時報トゥートに対して返信する**
- [ ] 新着Qiita記事をトゥートする際に suffix （後置詞）を加える（例： #TAG_qiita）

----------------

- [x] 過去の Issues も検索しましたが該当するものはありませんでした。


-----

## コメント

-----

##### 379578969

2018/04/08 20:13 by hidao80

うーん？ なんとなくインスタンス・マスター様の意見と相違があるような…？🤔

> 毎時の投稿されたタグ一覧の投稿が技術関連のハッシュタグの検索結果を埋めちゃってるのちょっとつらいかなー

とおっしゃっておられているので、**LTLに限らず、Qiitadonのトゥートログに*ほとんどのハッシュタグ検索を無効化するほどの、タグだけが羅列されているトゥート*が濫造(1日24回発行)されている**のを憂慮されておられるように推察します。

Qiitaの人気タグ（ex. python）は、毎時なにがしか投稿されていると推察され、とすると **トゥートログのタグ検索結果のうち大半がQithubで占められて**きて 、Qiitadon上でpythonタグ打ってもその一般トゥートが検索で見つかりにくいというのが「つらいかなー」なのかと。

Qiitadonでは同一ハッシュタグが大量に投稿されない事情もあり、相対的に**Qithubの「Qiitaの投稿タグ一覧トゥート」が「Qiitadonタグスパム」化している**のに悩まれておられるのかと。

なので、私はこの問題の本質を **「Qiitadonのトゥートを検索したいのにQiita記事情報ばかりかかってくる」** のだと考えているのですが、いかがでしょうか🤨

## 対案A

新着記事トゥート機能だけ残して、タグ一覧トゥートをやめる

-----

##### 379625258

2018/04/09 04:11 by KEINOS

> Qiitadon上でpythonタグ打ってもその一般トゥートが検索で見つかりにくいというのが「つらいかなー」なのかと
>
> 「Qiitadonのトゥートを検索したいのにQiita記事情報ばかりかかってくる」 のだと考えているのですが、いかがでしょうか🤨


確かに。悲しいかな、いちユーザーとしてもわかるところです。（Qithub-BOT涙目）

「毎時の投稿されたタグ一覧の投稿」とあったので、てっきり取りまとめトゥートを指しており、該当Qiita記事への導線が機能していないのだと解釈しておりました。（実際そうですが。。。）

しかし、考えてみると、ホーム上であればフィルターをかけることができても、**ハッシュタグ検索の場合は結果にフィルターをかけられない**ので、「Qiita 記事以外で、とあるキーワード（タグ）について情報を dig したい場合」に舌打ちが聞こえてくるようです。

@hidao80 さんの [MastoFilter](https://github.com/hidao80/MastoFilter) が割と Qiitadon ユーザーから食いつきが良いのもそれを表していると思います。

## 対案B

    1. 取りまとめトゥートの廃止（上記対案と同じ）
    2. 時報トゥートと新着Qiita記事トゥートのアカウントをわける（初案と同じ）
    3. 新着Qiita記事をトゥートする際に prefix もしくは suffix を加える（← 新規追加）
       例）#ui → #qiita_ui or #ui_qiita

従来の**デメリットは変わらない**のですが、若干のメリットは生まれるので**手間の割には善処感がある**と思うのですが、加えて新着 Qiita 記事をハッシュタグ検索から除外もできると思います。いかがでしょう？

## デメリット

1. タグ検索時に **prefix/suffix 付きで検索しないと新着Qiita記事は表示されない**
1. Qithub(bot)のフォロワーのホームが 新着Qiita記事トゥートで埋まる（フィルターで対処可能）

## メリット

1. タグ検索時に **prefix/suffix 付きで検索しないと新着Qiita記事は表示されない**
1. タグ検索時に**取りまとめトゥートでなく新着Qiita記事トゥートが表示される**
1. LTL 上の**トゥートが減る**（時報のみで取りまとめトゥートがなくなる）
1. Qiitadonユーザー関係なく、**どの新着Qiita記事トゥートもブースト可能**になる




-----

##### 379676337

2018/04/09 08:33 by KEINOS

って、ポイントは同じ話をしていますね。 (>_<)


-----

##### 379691864

2018/04/09 09:30 by hidao80

## 対案C

1. 取りまとめトゥートの廃止（上記対案と同じ）
2. 時報トゥートと新着Qiita記事トゥートのアカウントをわける（初案と同じ）
3. 新着Qiita記事をトゥートする際に prefix もしくは suffix を加える（上記対案と同じ）
   例）#ui → #qiita_ui or #ui_qiita
4. 【NEW!】新着記事トゥートを非収載とし、時報トゥートに新着記事トゥートの検索方法（prefix or postfix or ather）のアナウンスをさせる。

4.によって、**qithub-BOTのタグフィード化**が可能なのではないかと考えています→任意のタグの新着情報だけをタグ検索で**アクティブに**拾うことができる

-----

##### 379705164

2018/04/09 10:20 by KEINOS

> 4. 【NEW!】新着記事トゥートを非収載とし、時報トゥートに新着記事トゥートの検索方法（prefix or postfix or ather）のアナウンスをさせる。

新着Qiita記事のトゥートを**非収載**にした場合、prefix/postfix 付けようが**検索できない**と思います。

時報トゥートに対して**返信でトゥート**するのであれば**公開でトゥートしても LTL には流れないはず**ですし、**ハッシュタグ検索も可能**です。フォロワーのホームには流れますが、それは問題ない範囲ではないでしょうか。

いずれにしても**共通ポイントはタグに前置詞/後置詞をつけるところ**なので、相違なければ先にこれを決定したいと思います。

1. #TAG_qiita 
1. #qiita_TAG

個人的には前者の前置詞（prefix）が良いと思います。理由としてはタグを検索した際に「あれ？ "xxx_qiita" ってタグがあるゾ？」という**新規のユーザーにリーチできるから**です。

後者の場合は、**知っている人には最短で検索できる**ものの Mastodon の仕様上、前方一致であるためタグを入力しても "qiita_xxx" の存在には気づかないためです。



-----

##### 379717762

2018/04/09 11:16 by hidao80

非収載のトゥート、たしかにタグ検索でかかりませんでした…（自分のトゥートなのに！）

閑話休題。

1. の`#TAG_qiita`に賛成です。
でもこれ、**後置詞にみえます**。TAGが対象の名詞で、それに`_qiita`を後置しているイメージです。（参考：<https://www.google.co.jp/search?q=前置詞とは>）

さておき、対象タグが前に来ていて、タグ検索で前方一致時にノイズになりにくいというのも好感です。また、検索候補に紛れ込みやすいというのも👍w

-----

##### 379895555

2018/04/09 21:11 by KEINOS

> 1. の#TAG_qiitaに賛成です。
> でもこれ、**後置詞にみえます**。

ほんとだ！よく見ると後置詞にみえますね！（ってかtypoです 😳）

では、`#TAG_qiita` ということで！ 👍 

さて、今後の流れですが、まずは大きく以下の３点を行いたいと思います。

1. BOT を新サーバーで稼働させる
1. タグの後置詞（postfix・suffix）実装 （`#TAG_qiita`スタイル）
1. 旧タグの削除

3 ですが、少々時間がかかるとは言うものの、やはり**すでに汚しているタグを綺麗にする必要がある**と思うので、旧スタイルのタグ（過去のトゥート）の削除中に他の事項を進め、消し終わってから、心機一転で新スタイルのタグで BOT を再稼働させたいと思います。

特に問題なければ Close お願いし 💪 

逆に何かあればコメント 4649 メカドック



-----

##### 380033454

2018/04/10 09:22 by hidao80

> さて、今後の流れですが、まずは大きく以下の３点を行いたいと思います。

行動順は箇条書き昇順ではないですよね？ いきなりBOTを再起動？🤔
気分的には 3. 2. 1. の順で処理したほうが良いと考えます。数字に他意がなければ気にしないでください。

後は問題ないと思います！

-----

##### 380039032

2018/04/10 09:41 by KEINOS

> 行動順は箇条書き昇順ではないですよね？ いきなりBOTを再起動？🤔

あいや！言葉足らずでした！ってか、わかりづらくて申し訳ないです。
気持ちはその通りでございます。

1. 旧タグの削除開始（その間に以下を実行）
1. BOT を新サーバー~~で稼働させる~~に引っ越し（DEVモードで検証）
1. タグの後置詞（postfix・suffix）実装 （#TAG_qiitaスタイル）

です！まずは[トゥートの削除](94#issuecomment-380018570) をはじめましょう。

新年度の断捨離からスタートってことで！


-----

##### 380040173

2018/04/10 09:45 by KEINOS

今晩、[必殺仕事人に削除依頼をする](94#issuecomment-380018570)ので、抹殺が終わったらこの issue はクローズしましょう！

-----

##### 381900460

2018/04/17 08:36 by hidao80

サービス休止のトゥート以外のトゥートすべての削除を確認しました。

クローズし💪
